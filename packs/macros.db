{"name":"Export Autorec JSON","type":"script","scope":"global","author":"lO87UDysxPLL0W3i","img":"icons/svg/upgrade.svg","command":"// Use this to export a clean copy of the current Autorec.\n// Do NOT use this while still having animation entries you don't want to share.\n\nconst settings = {};\nsettings.melee = await game.settings.get('autoanimations', 'aaAutorec-melee')\nsettings.range = await game.settings.get('autoanimations', 'aaAutorec-range')\nsettings.ontoken = await game.settings.get('autoanimations', 'aaAutorec-ontoken')\nsettings.templatefx = await game.settings.get('autoanimations', 'aaAutorec-templatefx')\nsettings.preset = await game.settings.get('autoanimations', 'aaAutorec-preset')\nsettings.aura = await game.settings.get('autoanimations', 'aaAutorec-aura')\nsettings.aefx = await game.settings.get('autoanimations', 'aaAutorec-aefx')\n\nlet id = 0;\nfor (const key of Object.keys(settings)) {\n    const sorted = [...settings[key]].sort((a, b) => !!b.metaData?.name - !!a.metaData?.name)\n\n    sorted.map(x => {\n        id++\n        x.id = !Number(x.id) ? String(id) : x.id;\n        x.metaData = x.metaData ?? {};\n        x.metaData.label = x.label;\n        x.metaData.menu = x.menu;\n        x.metaData.name = x.metaData.name ?? \"5e Animations\";\n        x.metaData.moduleVersion = x.metaData.moduleVersion ?? game.modules.get(\"dnd5e-animations\").version;\n        x.metaData.version = x.metaData.version ?? 1;\n        return x\n    })\n\n    sorted.sort((a, b) => a.id - b.id)\n    settings[key] = sorted\n}\n\nsettings.version = await game.settings.get('autoanimations', 'aaAutorec').version\n\n// New File\nconst content = JSON.stringify(settings, null, '\\t');\nconst file = new File([content], `autorec-new.json`, { type: 'application/json' });\nvar response = await FilePicker.upload(\"data\", \"\", file);","ownership":{"default":0,"lO87UDysxPLL0W3i":3},"flags":{"core":{"sourceId":"Macro.NUrFnxBTElGs7unT"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1672505481685,"modifiedTime":1677197346733,"lastModifiedBy":"lO87UDysxPLL0W3i"},"folder":null,"sort":0,"_id":"8TuSEFCqDT7IH35f"}
{"name":"Open Autorec Menu","type":"script","scope":"global","author":"lO87UDysxPLL0W3i","img":"icons/svg/door-exit.svg","command":"Hooks.call('AutomaticAnimations.Open.Menu.New')","ownership":{"default":0,"lO87UDysxPLL0W3i":3},"flags":{"core":{"sourceId":"Macro.RLG1DQb7QvP5UJOA"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677188526050,"modifiedTime":1677188789805,"lastModifiedBy":"lO87UDysxPLL0W3i"},"folder":null,"sort":0,"_id":"GpwL2YYqYMHiTUvO"}
{"name":"Open Update Menu","type":"script","scope":"global","author":"lO87UDysxPLL0W3i","img":"icons/svg/wall-direction.svg","command":"new autorecUpdateFormApplication().render(true)","ownership":{"default":0,"lO87UDysxPLL0W3i":3},"flags":{"core":{"sourceId":"Macro.0Ff9ogIjQsBBTjMD"}},"_stats":{"systemId":"dnd5e","systemVersion":"2.1.5","coreVersion":"10.291","createdTime":1677188560427,"modifiedTime":1677188789321,"lastModifiedBy":"lO87UDysxPLL0W3i"},"folder":null,"sort":0,"_id":"Jh1PBTsZEppXnzam"}
